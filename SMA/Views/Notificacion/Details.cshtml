@model SMA.Entities.TNotificacionGeneral


@using Microsoft.AspNetCore.Http
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@{
    SMA.Entities.TUsuario usuario = null;
    var usuarioTemp = HttpContextAccessor.HttpContext.Session.GetString("usuario");
    if (usuarioTemp != null)
    {
        usuario = (Newtonsoft.Json.JsonConvert.DeserializeObject<SMA.Entities.TUsuario>(usuarioTemp));
    }
    ViewData["Title"] = "Detalles notificación";
}

<!-- Content Header (Page header) -->
<div class="content-header">
    <div class="container-fluid">
        <div class="row mb-2">
            <div class="col-sm-6">
            </div><!-- /.col -->
            <div class="col-sm-6">
                <ol class="breadcrumb float-sm-right">
                    <li class="breadcrumb-item"><a href="@Url.Action("Index","Principal")">Inicio</a></li>
                    <li class="breadcrumb-item"><a href="@Url.Action("AllNotifications","Notificacion")">Notificaciones</a></li>
                    <li class="breadcrumb-item active">Detalles</li>
                </ol>
            </div><!-- /.col -->
        </div><!-- /.row -->
    </div><!-- /.container-fluid -->
</div>



<div class="card">
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <dl class="row">
                    <dt class="col-sm-4">
                        @Html.DisplayNameFor(model => model.Titulo)
                    </dt>
                    <dd class="col-sm-8">
                        @Html.DisplayFor(model => model.Titulo)
                    </dd>
                    <dt class="col-sm-4">
                        @Html.DisplayNameFor(model => model.Descripcion)
                    </dt>
                    <dd class="col-sm-8">
                        @Html.DisplayFor(model => model.Descripcion)
                    </dd>
                    <dt class="col-sm-4">
                        @Html.DisplayNameFor(model => model.Fecha)
                    </dt>
                    <dd class="col-sm-8">
                        @Html.DisplayFor(model => model.Fecha)
                    </dd>
                    <dt class="col-sm-4">
                        @Html.DisplayNameFor(model => model.NumTicket)
                    </dt>
                    <dd class="col-sm-8">
                        @Html.DisplayFor(model => model.NumTicket)
                    </dd>
                </dl>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <strong>Responsable</strong>
                </div>

                <div class="form-group text-center">
                    @if (Model.IdEmisorNavigation.Foto != null)
                    {
                        <img class="profile-user-img img-fluid img-circle image"
                             src="data:image/jpeg;charset=utf-8;base64,@Convert.ToBase64String(Model.IdEmisorNavigation.Foto)"
                             alt="user image"
                             style="height: 250px; width: auto"
                             >
                    }
                    else
                    {
                        <img class="profile-user-img img-fluid img-circle image"
                             src="~/img/3177440.png"
                             alt="user image"
                             style="height: 250px; width:auto; border-radius: 100px">
                    }
                </div>
                <div class="form-group text-center">
                    <div><h6>@Model.IdEmisorNavigation.Nombre @Model.IdEmisorNavigation.Apellidos - @Model.IdEmisorNavigation.CorreoElectronico</h6></div>
                </div>

            </div>

        </div>
        @if (string.Equals(usuario.IdRolNavigation.TipoRol, "admin", StringComparison.OrdinalIgnoreCase))
        {
            <p align="right">
                <a asp-action="DetailsReview" class=" btn  btn-info" asp-controller="Ticket" asp-route-id="@Model.NumTicket">Ver ticket</a>
            </p>
        }
        else
        {
            <p align="right">
                <a asp-action="DetailsReviewReadOnly" class=" btn  btn-info" asp-controller="Ticket" asp-route-id="@Model.NumTicket">Ver revisión</a>
            </p>
        }


    </div>
</div>

